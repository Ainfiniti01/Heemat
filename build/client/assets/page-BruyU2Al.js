import{r as a,j as e,w as C}from"./jsx-runtime-BnyUm0hy.js";import{R as T}from"./layout-BYEO0U_X.js";import{A as U}from"./arrow-left-BeF929zU.js";import{S as A}from"./star-CefSRRgb.js";import{P as _}from"./plus-BizC9sCZ.js";import{E as I}from"./eye-DmGQJtsC.js";import{C as O}from"./check-Dz7Et3iq.js";import{T as D}from"./trash-2-DtMy37yD.js";import"./CartContext-CJHeVFYT.js";import"./createLucideIcon-B74CgAzu.js";function L(){const[o,i]=a.useState([]),[F,p]=a.useState(!0),[P,n]=a.useState(""),[g,l]=a.useState(""),[d,c]=a.useState({}),[q,J]=a.useState(!0),[u,y]=a.useState(""),[f,h]=a.useState(0),[b,w]=a.useState(""),[k,j]=a.useState(""),[N,v]=a.useState(!1);a.useEffect(()=>{m()},[]);const m=async()=>{try{p(!0);const t=await fetch("/api/admin/reviews/list");if(!t.ok)throw new Error("Failed to fetch reviews");const s=await t.json();i(s)}catch(t){console.error("Fetch reviews error:",t)}finally{p(!1)}},B=async t=>{t.preventDefault(),v(!0),n(""),l("");const s={user_name:u,rating:f,review_text:b,country:k,status:"pending",created_at:new Date().toISOString(),id:o.length+1,product_name:"N/A",product_image:""};try{i(r=>[s,...r]),l("Review added successfully! It is now pending approval."),y(""),h(0),w(""),j(""),setTimeout(()=>l(""),3e3)}catch(r){console.error("Add review error:",r),n("Failed to add review"),setTimeout(()=>n(""),3e3)}finally{v(!1)}},E=async t=>{try{if(c(r=>({...r,[t]:"approving"})),!(await fetch("/api/admin/reviews/approve",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reviewId:t})})).ok)throw new Error("Failed to approve review");l("Review approved successfully!"),setTimeout(()=>l(""),3e3),m()}catch(s){console.error("Approve review error:",s),n("Failed to approve review"),setTimeout(()=>n(""),3e3)}finally{c(s=>({...s,[t]:null}))}},R=async t=>{if(confirm("Are you sure you want to delete this review? This action cannot be undone."))try{if(c(r=>({...r,[t]:"deleting"})),!(await fetch("/api/admin/reviews/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({reviewId:t})})).ok)throw new Error("Failed to delete review");l("Review deleted successfully!"),setTimeout(()=>l(""),3e3),m()}catch(s){console.error("Delete review error:",s),n("Failed to delete review"),setTimeout(()=>n(""),3e3)}finally{c(s=>({...s,[t]:null}))}},S=(t,s=null)=>[...Array(5)].map((r,x)=>e.jsx(A,{className:`w-5 h-5 cursor-pointer ${x<t?"text-[#ff00b3] fill-current":"text-gray-300"}`,onClick:()=>s&&s(x+1)},x)),M=t=>{const s={pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",approved:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",rejected:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"};return s[t]||s.pending};return e.jsxs("div",{className:"min-h-screen bg-white dark:bg-[#121212]",children:[e.jsx("div",{className:"bg-white dark:bg-[#1E1E1E] border-b border-[#E9E9E9] dark:border-[#333333] px-6 py-4",children:e.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("a",{href:"/admin",className:"flex items-center gap-2 text-[#7B7B7B] dark:text-[#A0A0A0] hover:text-[#ff00b3] transition-colors",children:[e.jsx(U,{className:"w-5 h-5"}),"Back to Dashboard"]}),e.jsx("div",{className:"w-px h-6 bg-[#E9E9E9] dark:bg-[#333333]"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-blue-600 flex items-center justify-center",children:e.jsx(A,{className:"w-5 h-5 text-white"})}),e.jsx("h1",{className:"text-xl font-bold text-black dark:text-white",style:{fontFamily:'Montserrat, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:"Add New Review"})]})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-6 py-8",children:[g&&e.jsx("div",{className:"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl text-sm text-green-600 dark:text-green-400",children:g}),e.jsxs("div",{className:"mb-8 bg-white dark:bg-[#1E1E1E] border border-[#F1F1F4] dark:border-[#333333] rounded-2xl p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-black dark:text-white mb-6",style:{fontFamily:'Montserrat, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:"Add New Review"}),e.jsxs("form",{onSubmit:B,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name"}),e.jsx("input",{type:"text",id:"name",className:"w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-[#2A2A2A] text-black dark:text-white focus:ring-2 focus:ring-[#ff00b3] focus:border-transparent outline-none transition-all duration-200",placeholder:"Customer Name",value:u,onChange:t=>y(t.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"rating",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Star Rating"}),e.jsx("div",{className:"flex items-center gap-1",children:S(f,h)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reviewText",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Review"}),e.jsx("textarea",{id:"reviewText",rows:"4",className:"w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-[#2A2A2A] text-black dark:text-white focus:ring-2 focus:ring-[#ff00b3] focus:border-transparent outline-none transition-all duration-200",placeholder:"Write your review here...",value:b,onChange:t=>w(t.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Country"}),e.jsx("input",{type:"text",id:"country",className:"w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-[#2A2A2A] text-black dark:text-white focus:ring-2 focus:ring-[#ff00b3] focus:border-transparent outline-none transition-all duration-200",placeholder:"e.g., USA, Nigeria",value:k,onChange:t=>j(t.target.value),required:!0})]}),e.jsxs("button",{type:"submit",className:"flex items-center gap-2 bg-[#ff00b3] hover:bg-[#FFB6C1 ] text-black font-semibold px-6 py-3 rounded-lg transition-all duration-300 disabled:opacity-50",disabled:N,children:[e.jsx(_,{className:"w-5 h-5"}),N?"Adding Review...":"Add Review"]})]})]}),F?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-[#7B7B7B] dark:text-[#A0A0A0]",children:"Loading reviews..."})}):o.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(I,{className:"w-16 h-16 text-[#7B7B7B] dark:text-[#A0A0A0] mx-auto mb-4"}),e.jsx("h3",{className:"text-black dark:text-white font-semibold text-xl mb-2",style:{fontFamily:'Montserrat, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:"No Reviews Found"}),e.jsx("p",{className:"text-[#7B7B7B] dark:text-[#A0A0A0]",style:{fontFamily:'Open Sans, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:"No reviews have been added yet."})]}):e.jsx("div",{className:"space-y-6",children:o.map(t=>e.jsx("div",{className:"bg-white dark:bg-[#1E1E1E] border border-[#F1F1F4] dark:border-[#333333] rounded-2xl p-6 hover:shadow-lg transition-all duration-300",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"flex items-start gap-4 lg:w-1/3",children:[t.product_image&&e.jsx("img",{src:t.product_image,alt:t.product_name,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-black dark:text-white font-semibold mb-1",style:{fontFamily:'Montserrat, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:t.product_name}),e.jsxs("p",{className:"text-[#7B7B7B] dark:text-[#A0A0A0] text-sm",style:{fontFamily:'Open Sans, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:["Review #",t.id]})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-black dark:text-white font-semibold",style:{fontFamily:'Montserrat, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:t.user_name}),t.country&&e.jsxs("span",{className:"text-[#7B7B7B] dark:text-[#A0A0A0] text-sm",style:{fontFamily:'Open Sans, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:["(",t.country,")"]}),e.jsx("div",{className:"flex items-center gap-1",children:S(t.rating)}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${M(t.status)}`,style:{fontFamily:'Montserrat, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})]}),e.jsx("span",{className:"text-[#7B7B7B] dark:text-[#A0A0A0] text-sm",style:{fontFamily:'Open Sans, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:new Date(t.created_at).toLocaleDateString()})]}),t.review_text&&e.jsxs("p",{className:"text-[#7B7B7B] dark:text-[#A0A0A0] mb-4 leading-relaxed",style:{fontFamily:'Open Sans, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:['"',t.review_text,'"']}),t.email&&e.jsxs("p",{className:"text-[#7B7B7B] dark:text-[#A0A0A0] text-sm mb-4",style:{fontFamily:'Open Sans, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:["Email: ",t.email]}),e.jsxs("div",{className:"flex gap-3",children:[t.status==="pending"&&e.jsxs("button",{onClick:()=>E(t.id),disabled:d[t.id]==="approving",className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-all duration-300 disabled:opacity-50",style:{fontFamily:'Montserrat, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:[e.jsx(O,{className:"w-4 h-4"}),d[t.id]==="approving"?"Approving...":"Approve"]}),e.jsxs("button",{onClick:()=>R(t.id),disabled:d[t.id]==="deleting",className:"flex items-center gap-2 bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-all duration-300 disabled:opacity-50",style:{fontFamily:'Montserrat, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:[e.jsx(D,{className:"w-4 h-4"}),d[t.id]==="deleting"?"Deleting...":"Delete"]})]})]})]})},t.id))})]})]})}const Z=C(function(i){return e.jsx(T,{children:e.jsx(L,{...i})})});export{Z as default};
