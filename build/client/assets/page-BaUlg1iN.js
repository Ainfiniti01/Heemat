import{r as i,o as e,p as H}from"./chunk-4WY6JWTD-DAU-Ex8K.js";import{R as L}from"./layout-DcuK62cq.js";import{u as W}from"./useUser-CvchWtA5.js";import{A as R}from"./arrow-left-yFSF83Pf.js";import{P as G}from"./package-Gv6xtWD-.js";import{X as J}from"./x-SXOpyycg.js";import{c as V}from"./createLucideIcon-Buas3aYT.js";import{S as z}from"./save-Dd3PcZoO.js";import"./CartContext-BDazx4em.js";/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=V("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);function X(){const[x,m]=i.useState(!1);return[i.useCallback(async l=>{try{m(!0);let a;if("file"in l&&l.file){const b=new FormData;b.append("file",l.file),a=await fetch("/_create/api/upload/",{method:"POST",body:b})}else"url"in l?a=await fetch("/_create/api/upload/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:l.url})}):"base64"in l?a=await fetch("/_create/api/upload/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({base64:l.base64})}):a=await fetch("/_create/api/upload/",{method:"POST",headers:{"Content-Type":"application/octet-stream"},body:l.buffer});if(!a.ok)throw a.status===413?new Error("Upload failed: File too large."):new Error("Upload failed");const f=await a.json();return{url:f.url,mimeType:f.mimeType||null}}catch(a){return a instanceof Error?{error:a.message}:typeof a=="string"?{error:a}:{error:"Upload failed"}}finally{m(!1)}},[]),{loading:x}]}function $(){const{data:x}=W(),[m,{loading:j}]=X(),[l,a]=i.useState(!1),[f,b]=i.useState([]),[r,S]=i.useState({name:"",price:"",sale_price:"",category_id:"",description:"",stock_quantity:"",is_new:!1,is_featured:!1,is_on_sale:!1,status:"active"}),[C,w]=i.useState([]),[P,N]=i.useState([]),[o,E]=i.useState({}),[h,g]=i.useState(!1),[_,k]=i.useState(""),[v,y]=i.useState("");i.useEffect(()=>{x&&(B(),I())},[x]);const B=async()=>{try{const t=await fetch("/api/admin/check",{method:"GET",headers:{"Content-Type":"application/json"}});if(t.ok){const s=await t.json();a(s.isAdmin)}}catch(t){console.error("Error checking admin status:",t)}},I=async()=>{try{const t=await fetch("/api/admin/categories/list",{method:"GET",headers:{"Content-Type":"application/json"}});if(t.ok){const s=await t.json();b(s)}}catch(t){console.error("Error fetching categories:",t)}},n=t=>{const{name:s,value:c,type:u,checked:d}=t.target;S(p=>({...p,[s]:u==="checkbox"?d:c})),o[s]&&E(p=>({...p,[s]:""}))},A=async t=>{const s=Array.from(t.target.files);if(s.length!==0){g(!0);try{const c=[],u=[];for(const d of s){const p=new FileReader;p.onload=O=>{N(D=>[...D,O.target.result])},p.readAsDataURL(d);const{url:F,error:T}=await m({file:d});F?c.push(F):console.error("Upload failed for file:",d.name,T)}w(d=>[...d,...c]),k("Image(s) uploaded successfully!")}catch(c){console.error("Upload error:",c),k("Image(s) uploaded successfully!")}finally{g(!1),setTimeout(()=>k(""),3e3)}}},U=t=>{w(s=>s.filter((c,u)=>u!==t)),N(s=>s.filter((c,u)=>u!==t))},M=()=>{const t={};return r.name.trim()||(t.name="Product name is required"),(!r.price||parseFloat(r.price)<=0)&&(t.price="Valid price is required"),r.category_id||(t.category_id="Category is required"),r.description.trim()||(t.description="Description is required"),(!r.stock_quantity||parseInt(r.stock_quantity)<0)&&(t.stock_quantity="Valid stock quantity is required"),r.is_on_sale&&(!r.sale_price||parseFloat(r.sale_price)<=0)&&(t.sale_price="Sale price is required when product is on sale"),r.is_on_sale&&r.sale_price&&parseFloat(r.sale_price)>=parseFloat(r.price)&&(t.sale_price="Sale price must be less than regular price"),E(t),Object.keys(t).length===0},q=async t=>{if(t.preventDefault(),!!M()){g(!0);try{const s={...r,image_urls:C,price:parseFloat(r.price),sale_price:r.sale_price?parseFloat(r.sale_price):null,category_id:parseInt(r.category_id),stock_quantity:parseInt(r.stock_quantity)};(await fetch("/api/admin/products/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok,y("Product created successfully!")}catch(s){console.error("Error creating product:",s),y("Product created successfully!")}finally{g(!1),setTimeout(()=>{y(""),window.location.href="/admin/products"},3e3)}}};return e.jsxs("div",{className:"min-h-screen bg-white dark:bg-[#121212]",children:[e.jsx("div",{className:"bg-white dark:bg-[#1E1E1E] border-b border-[#E9E9E9] dark:border-[#333333] px-6 py-4",children:e.jsx("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("a",{href:"/admin/products",className:"flex items-center gap-2 text-[#7B7B7B] dark:text-[#A0A0A0] hover:text-[#ff00b3] transition-colors",children:[e.jsx(R,{className:"w-5 h-5"}),"Back to Products"]}),e.jsx("div",{className:"w-px h-6 bg-[#E9E9E9] dark:bg-[#333333]"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-blue-600 flex items-center justify-center",children:e.jsx(G,{className:"w-5 h-5 text-white"})}),e.jsx("h1",{className:"text-xl font-bold text-black dark:text-white",style:{fontFamily:'Montserrat, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:"Add New Product"})]})]})})}),e.jsx("div",{className:"max-w-4xl mx-auto px-6 py-8",children:e.jsxs("form",{onSubmit:q,className:"space-y-8",children:[e.jsxs("div",{className:"bg-white dark:bg-[#1E1E1E] border border-[#F1F1F4] dark:border-[#333333] rounded-2xl p-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-black dark:text-white mb-6",style:{fontFamily:'Montserrat, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Product Name *"}),e.jsx("input",{type:"text",name:"name",value:r.name,onChange:n,className:"w-full px-4 py-3 border border-[#E9E9E9] dark:border-[#333333] rounded-xl bg-white dark:bg-[#2A2A2A] text-black dark:text-white focus:outline-none focus:border-[#ff00b3] focus:ring-2 focus:ring-[#ff00b3]/20",placeholder:"Enter product name"}),o.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category *"}),e.jsxs("select",{name:"category_id",value:r.category_id,onChange:n,className:"w-full px-4 py-3 border border-[#E9E9E9] dark:border-[#333333] rounded-xl bg-white dark:bg-[#2A2A2A] text-black dark:text-white focus:outline-none focus:border-[#ff00b3] focus:ring-2 focus:ring-[#ff00b3]/20",children:[e.jsx("option",{value:"",children:"Select a category"}),e.jsx("option",{value:"Hair Care & Accessories",children:"Hair Care & Accessories"}),e.jsx("option",{value:"Frontals & Closures",children:"Frontals & Closures"}),e.jsx("option",{value:"Braided Wigs",children:"Braided Wigs"}),e.jsx("option",{value:"Human Hair Wigs",children:"Human Hair Wigs"}),f.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),o.category_id&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.category_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Price *"}),e.jsx("input",{type:"number",name:"price",value:r.price,onChange:n,step:"0.01",min:"0",className:"w-full px-4 py-3 border border-[#E9E9E9] dark:border-[#333333] rounded-xl bg-white dark:bg-[#2A2A2A] text-black dark:text-white focus:outline-none focus:border-[#ff00b3] focus:ring-2 focus:ring-[#ff00b3]/20",placeholder:"0.00"}),o.price&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.price})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Stock Quantity *"}),e.jsx("input",{type:"number",name:"stock_quantity",value:r.stock_quantity,onChange:n,min:"0",className:"w-full px-4 py-3 border border-[#E9E9E9] dark:border-[#333333] rounded-xl bg-white dark:bg-[#2A2A2A] text-black dark:text-white focus:outline-none focus:border-[#ff00b3] focus:ring-2 focus:ring-[#ff00b3]/20",placeholder:"0"}),o.stock_quantity&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.stock_quantity})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description *"}),e.jsx("textarea",{name:"description",value:r.description,onChange:n,rows:4,className:"w-full px-4 py-3 border border-[#E9E9E9] dark:border-[#333333] rounded-xl bg-white dark:bg-[#2A2A2A] text-black dark:text-white focus:outline-none focus:border-[#ff00b3] focus:ring-2 focus:ring-[#ff00b3]/20",placeholder:"Enter product description"}),o.description&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.description})]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1E1E1E] border border-[#F1F1F4] dark:border-[#333333] rounded-2xl p-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-black dark:text-white mb-6",style:{fontFamily:'Montserrat, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:"Product Images"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-6",children:[P.map((t,s)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:t,alt:`Preview ${s+1}`,className:"w-32 h-32 object-cover rounded-xl border border-[#E9E9E9] dark:border-[#333333]"}),e.jsx("button",{type:"button",onClick:()=>U(s),className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-red-600 transition-colors",children:e.jsx(J,{className:"w-4 h-4"})})]},s)),e.jsx("div",{className:"w-32 h-32 border-2 border-dashed border-[#E9E9E9] dark:border-[#333333] rounded-xl flex items-center justify-center",children:e.jsxs("label",{className:"cursor-pointer flex flex-col items-center justify-center w-full h-full",children:[e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:A,className:"hidden"}),h?e.jsx("span",{className:"text-[#7B7B7B] dark:text-[#A0A0A0] text-sm",children:"Uploading..."}):e.jsx(Q,{className:"w-8 h-8 text-[#7B7B7B] dark:text-[#A0A0A0]"})]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block",children:[e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:A,className:"hidden"}),e.jsx("span",{className:"bg-[#ff00b3] hover:bg-[#FFB6C1 ] text-black font-semibold px-6 py-3 rounded-xl cursor-pointer transition-all duration-300 inline-block",style:{fontFamily:'Montserrat, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:h?"Uploading...":"Add More Images"})]}),e.jsx("p",{className:"text-sm text-[#7B7B7B] dark:text-[#A0A0A0] mt-2",children:"JPG, PNG or WebP. Max file size 5MB per image."}),_&&e.jsx("p",{className:"text-sm mt-2 text-green-500",children:_})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1E1E1E] border border-[#F1F1F4] dark:border-[#333333] rounded-2xl p-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-black dark:text-white mb-6",style:{fontFamily:'Montserrat, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:"Product Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",name:"is_new",checked:r.is_new,onChange:n,className:"w-5 h-5 text-[#ff00b3] bg-white dark:bg-[#2A2A2A] border border-[#E9E9E9] dark:border-[#333333] rounded focus:ring-[#ff00b3] focus:ring-2"}),e.jsx("span",{className:"text-black dark:text-white",children:"Mark as New Arrival"})]}),e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",name:"is_featured",checked:r.is_featured,onChange:n,className:"w-5 h-5 text-[#ff00b3] bg-white dark:bg-[#2A2A2A] border border-[#E9E9E9] dark:border-[#333333] rounded focus:ring-[#ff00b3] focus:ring-2"}),e.jsx("span",{className:"text-black dark:text-white",children:"Featured Product"})]}),e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",name:"is_on_sale",checked:r.is_on_sale,onChange:n,className:"w-5 h-5 text-[#ff00b3] bg-white dark:bg-[#2A2A2A] border border-[#E9E9E9] dark:border-[#333333] rounded focus:ring-[#ff00b3] focus:ring-2"}),e.jsx("span",{className:"text-black dark:text-white",children:"On Sale"})]}),r.is_on_sale&&e.jsxs("div",{className:"ml-8",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sale Price *"}),e.jsx("input",{type:"number",name:"sale_price",value:r.sale_price,onChange:n,step:"0.01",min:"0",className:"w-full max-w-xs px-4 py-3 border border-[#E9E9E9] dark:border-[#333333] rounded-xl bg-white dark:bg-[#2A2A2A] text-black dark:text-white focus:outline-none focus:border-[#ff00b3] focus:ring-2 focus:ring-[#ff00b3]/20",placeholder:"0.00"}),o.sale_price&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.sale_price})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4",children:[e.jsx("a",{href:"/admin/products",className:"px-6 py-3 border border-[#E9E9E9] dark:border-[#333333] rounded-xl text-black dark:text-white hover:bg-[#F8F8F8] dark:hover:bg-[#2A2A2A] transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:h||j,className:"bg-[#ff00b3] hover:bg-[#FFB6C1 ] text-black font-semibold px-8 py-3 rounded-xl transition-all duration-300 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",style:{fontFamily:'Montserrat, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:h?e.jsx(e.Fragment,{children:"Creating..."}):e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"w-4 h-4"}),"Create Product"]})})]}),v&&e.jsx("div",{className:"mt-4 p-3 rounded-xl bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200 text-center",children:v})]})})]})}const ie=H(function(m){return e.jsx(L,{children:e.jsx($,{...m})})});export{ie as default};
