import{r,o as e,p as A}from"./chunk-4WY6JWTD-DAU-Ex8K.js";import{R as F}from"./layout-DcuK62cq.js";import{A as v}from"./arrow-left-yFSF83Pf.js";import{S as b}from"./star-CIXZKIkJ.js";import{F as E}from"./filter-BWc8umzU.js";import{S as M}from"./search-C-9vhYiQ.js";import{E as C}from"./eye-CGycnIKy.js";import{C as U}from"./check-Cp17e4rr.js";import{X as R}from"./x-SXOpyycg.js";import{T as L}from"./trash-2-Ca-buCHJ.js";import"./CartContext-BDazx4em.js";import"./createLucideIcon-Buas3aYT.js";function T(){const[f,m]=r.useState([]),[j,u]=r.useState(!0),[I,i]=r.useState(""),[g,d]=r.useState(""),[x,k]=r.useState("all"),[l,S]=r.useState(""),[o,c]=r.useState({}),[_,O]=r.useState(!0);r.useEffect(()=>{p()},[x]);const p=async()=>{try{u(!0);const t=await fetch(`/api/admin/reviews/list?status=${x}`);if(!t.ok)throw new Error("Failed to fetch reviews");const s=await t.json();m(s)}catch(t){console.error("Fetch reviews error:",t)}finally{u(!1)}},h=async(t,s)=>{try{if(c(n=>({...n,[t]:s})),!(await fetch("/api/admin/reviews/update-status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reviewId:t,status:s})})).ok)throw new Error(`Failed to ${s} review`);d(`Review ${s} successfully!`),setTimeout(()=>d(""),3e3),p()}catch(a){console.error(`Update review status (${s}) error:`,a),i(`Failed to ${s} review`),setTimeout(()=>i(""),3e3)}finally{c(a=>({...a,[t]:null}))}},w=async t=>{if(confirm("Are you sure you want to delete this review? This action cannot be undone."))try{if(c(a=>({...a,[t]:"deleting"})),!(await fetch("/api/admin/reviews/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({reviewId:t})})).ok)throw new Error("Failed to delete review");d("Review deleted successfully!"),setTimeout(()=>d(""),3e3),p()}catch(s){console.error("Delete review error:",s),i("Failed to delete review"),setTimeout(()=>i(""),3e3)}finally{c(s=>({...s,[t]:null}))}},N=(t,s=null)=>[...Array(5)].map((a,n)=>e.jsx(b,{className:`w-5 h-5 cursor-pointer ${n<t?"text-[#ff00b3] fill-current":"text-gray-300"}`,onClick:()=>s&&s(n+1)},n)),y=f.filter(t=>{var s,a,n;return t.user_name.toLowerCase().includes(l.toLowerCase())||((s=t.product_name)==null?void 0:s.toLowerCase().includes(l.toLowerCase()))||((a=t.review_text)==null?void 0:a.toLowerCase().includes(l.toLowerCase()))||((n=t.country)==null?void 0:n.toLowerCase().includes(l.toLowerCase()))}),B=t=>{const s={pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",approved:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",rejected:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"};return s[t]||s.pending};return e.jsxs("div",{className:"min-h-screen bg-white dark:bg-[#121212]",children:[e.jsx("div",{className:"bg-white dark:bg-[#1E1E1E] border-b border-[#E9E9E9] dark:border-[#333333] px-6 py-4",children:e.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("a",{href:"/admin",className:"flex items-center gap-2 text-[#7B7B7B] dark:text-[#A0A0A0] hover:text-[#ff00b3] transition-colors",children:[e.jsx(v,{className:"w-5 h-5"}),"Back to Dashboard"]}),e.jsx("div",{className:"w-px h-6 bg-[#E9E9E9] dark:bg-[#333333]"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-blue-600 flex items-center justify-center",children:e.jsx(b,{className:"w-5 h-5 text-white"})}),e.jsx("h1",{className:"text-xl font-bold text-black dark:text-white",style:{fontFamily:'Montserrat, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:"Reviews"})]})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-6 py-8",children:[g&&e.jsx("div",{className:"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl text-sm text-green-600 dark:text-green-400",children:g}),e.jsx("div",{className:"mb-6 bg-white dark:bg-[#1E1E1E] border border-[#F1F1F4] dark:border-[#333333] rounded-2xl p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-5 h-5 text-[#7B7B7B] dark:text-[#A0A0A0]"}),e.jsxs("select",{value:x,onChange:t=>k(t.target.value),className:"px-4 py-3 border border-[#E9E9E9] dark:border-[#333333] rounded-xl bg-white dark:bg-[#2A2A2A] text-black dark:text-white focus:outline-none focus:border-[#ff00b3] focus:ring-2 focus:ring-[#ff00b3]/20",style:{fontFamily:'Open Sans, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:[e.jsx("option",{value:"all",children:"All Reviews"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(M,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-[#7B7B7B] dark:text-[#A0A0A0]"}),e.jsx("input",{type:"text",placeholder:"Search reviews, customers, or products...",value:l,onChange:t=>S(t.target.value),className:"w-full pl-10 pr-4 py-3 border border-[#E9E9E9] dark:border-[#333333] rounded-xl bg-white dark:bg-[#2A2A2A] text-black dark:text-white placeholder-[#7B7B7B] focus:outline-none focus:border-[#ff00b3] focus:ring-2 focus:ring-[#ff00b3]/20",style:{fontFamily:'Open Sans, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'}})]})]})}),j?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-[#7B7B7B] dark:text-[#A0A0A0]",children:"Loading reviews..."})}):y.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(C,{className:"w-16 h-16 text-[#7B7B7B] dark:text-[#A0A0A0] mx-auto mb-4"}),e.jsx("h3",{className:"text-black dark:text-white font-semibold text-xl mb-2",style:{fontFamily:'Montserrat, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:"No Reviews Found"}),e.jsx("p",{className:"text-[#7B7B7B] dark:text-[#A0A0A0]",style:{fontFamily:'Open Sans, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:l?"Try adjusting your search terms.":"No reviews match the selected filter."})]}):e.jsx("div",{className:"space-y-6",children:y.map(t=>e.jsx("div",{className:"bg-white dark:bg-[#1E1E1E] border border-[#F1F1F4] dark:border-[#333333] rounded-2xl p-6 hover:shadow-lg transition-all duration-300",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"flex items-start gap-4 lg:w-1/3",children:[t.product_image&&e.jsx("img",{src:t.product_image,alt:t.product_name,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-black dark:text-white font-semibold mb-1",style:{fontFamily:'Montserrat, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:t.product_name}),e.jsxs("p",{className:"text-[#7B7B7B] dark:text-[#A0A0A0] text-sm",style:{fontFamily:'Open Sans, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:["Review #",t.id]})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-black dark:text-white font-semibold",style:{fontFamily:'Montserrat, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:t.user_name}),t.country&&e.jsxs("span",{className:"text-[#7B7B7B] dark:text-[#A0A0A0] text-sm",style:{fontFamily:'Open Sans, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:["(",t.country,")"]}),e.jsx("div",{className:"flex items-center gap-1",children:N(t.rating)}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${B(t.status)}`,style:{fontFamily:'Montserrat, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})]}),e.jsx("span",{className:"text-[#7B7B7B] dark:text-[#A0A0A0] text-sm",style:{fontFamily:'Open Sans, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:new Date(t.created_at).toLocaleDateString()})]}),t.review_text&&e.jsxs("p",{className:"text-[#7B7B7B] dark:text-[#A0A0A0] mb-4 leading-relaxed",style:{fontFamily:'Open Sans, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:['"',t.review_text,'"']}),t.email&&e.jsxs("p",{className:"text-[#7B7B7B] dark:text-[#A0A0A0] text-sm mb-4",style:{fontFamily:'Open Sans, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:["Email: ",t.email]}),e.jsxs("div",{className:"flex gap-3",children:[(t.status==="pending"||t.status==="rejected")&&e.jsxs("button",{onClick:()=>h(t.id,"approved"),disabled:o[t.id]==="approved",className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-all duration-300 disabled:opacity-50",style:{fontFamily:'Montserrat, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:[e.jsx(U,{className:"w-4 h-4"}),o[t.id]==="approved"?"Posting...":"Post"]}),(t.status==="pending"||t.status==="approved")&&e.jsxs("button",{onClick:()=>h(t.id,"rejected"),disabled:o[t.id]==="rejected",className:"flex items-center gap-2 bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg transition-all duration-300 disabled:opacity-50",style:{fontFamily:'Montserrat, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:[e.jsx(R,{className:"w-4 h-4"}),o[t.id]==="rejected"?"Rejecting...":"Reject"]}),e.jsxs("button",{onClick:()=>w(t.id),disabled:o[t.id]==="deleting",className:"flex items-center gap-2 bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-all duration-300 disabled:opacity-50",style:{fontFamily:'Montserrat, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:[e.jsx(L,{className:"w-4 h-4"}),o[t.id]==="deleting"?"Deleting...":"Delete"]})]})]})]})},t.id))})]})]})}const V=A(function(m){return e.jsx(F,{children:e.jsx(T,{...m})})});export{V as default};
