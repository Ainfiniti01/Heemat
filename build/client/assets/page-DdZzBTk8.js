import{u as A,a as h,r as i,j as e,w as E}from"./jsx-runtime-BnyUm0hy.js";import{R as B}from"./layout-BYEO0U_X.js";import{u as C}from"./useUser-BdPWTh4p.js";import{A as F}from"./arrow-left-BeF929zU.js";import{T as S}from"./tag-B8ol0lzt.js";import{S as b}from"./save-JvMsOM1Q.js";import{I}from"./image-CiifTDx3.js";import"./CartContext-CJHeVFYT.js";import"./createLucideIcon-B74CgAzu.js";function T(){const l=A(),o=h().id,{data:d,loading:f}=C(),[p,y]=i.useState(!1),[s,x]=i.useState({name:"",description:"",image_url:""}),[g,u]=i.useState(!1),[j,n]=i.useState(!1),[k,N]=i.useState(!0);i.useEffect(()=>{d&&v()},[d]),i.useEffect(()=>{if(o){const r=(JSON.parse(localStorage.getItem("categories"))||[]).find(a=>a.id===o);r?x({name:r.name,description:r.description||"",image_url:r.image_url||""}):N(!1)}},[o]);const v=async()=>{try{const t=await fetch("/api/admin/check",{method:"GET",headers:{"Content-Type":"application/json"}});if(t.ok){const r=await t.json();y(r.isAdmin)}}catch(t){console.error("Error checking admin status:",t)}},w=async t=>{t.preventDefault(),u(!0),n(!1);try{await new Promise(a=>setTimeout(a,500));let r=JSON.parse(localStorage.getItem("categories"))||[];r=r.map(a=>a.id===o?{...a,...s}:a),localStorage.setItem("categories",JSON.stringify(r)),n(!0),setTimeout(()=>{l("/admin/categories")},2e3)}catch(r){console.error("Error simulating category update:",r),n(!0),setTimeout(()=>{l("/admin/categories")},2e3)}finally{u(!1)}},c=(t,r)=>{x(a=>({...a,[t]:r}))};return f||!d||!p?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white dark:bg-[#121212]",children:e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Loading user data or checking admin status..."})}):k?e.jsxs("div",{className:"min-h-screen bg-white dark:bg-[#121212]",children:[e.jsx("div",{className:"bg-white dark:bg-[#1E1E1E] border-b border-[#E9E9E9] dark:border-[#333333] px-6 py-4",children:e.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("a",{href:"/admin/categories",className:"flex items-center gap-2 text-[#7B7B7B] dark:text-[#A0A0A0] hover:text-[#ff00b3] transition-colors",children:[e.jsx(F,{className:"w-5 h-5"}),"Back to Categories"]}),e.jsx("div",{className:"w-px h-6 bg-[#E9E9E9] dark:bg-[#333333]"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-blue-600 flex items-center justify-center",children:e.jsx(S,{className:"w-5 h-5 text-white"})}),e.jsx("h1",{className:"text-xl font-bold text-black dark:text-white",style:{fontFamily:'Montserrat, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:"Edit Category"})]})]})})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[j&&e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-2xl p-6 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-green-500 flex items-center justify-center",children:e.jsx(b,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-green-800 dark:text-green-200",children:"Category Updated Successfully!"}),e.jsx("p",{className:"text-sm text-green-600 dark:text-green-300",children:"Redirecting to categories list..."})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-[#1E1E1E] border border-[#F1F1F4] dark:border-[#333333] rounded-2xl overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-[#F1F1F4] dark:border-[#333333]",children:[e.jsx("h2",{className:"text-lg font-semibold text-black dark:text-white",style:{fontFamily:'Montserrat, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:"Category Information"}),e.jsx("p",{className:"text-sm text-[#7B7B7B] dark:text-[#A0A0A0] mt-1",children:"Edit the details of this product category"})]}),e.jsxs("form",{onSubmit:w,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category Name *"}),e.jsx("input",{type:"text",value:s.name,onChange:t=>c("name",t.target.value),className:"w-full px-4 py-3 border border-[#E9E9E9] dark:border-[#333333] rounded-xl bg-white dark:bg-[#2A2A2A] text-black dark:text-white placeholder-[#7B7B7B] focus:outline-none focus:border-[#ff00b3] focus:ring-2 focus:ring-[#ff00b3]/20 transition-all duration-300",placeholder:"e.g., Dresses, Shoes, Accessories",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{value:s.description,onChange:t=>c("description",t.target.value),className:"w-full px-4 py-3 border border-[#E9E9E9] dark:border-[#333333] rounded-xl bg-white dark:bg-[#2A2A2A] text-black dark:text-white placeholder-[#7B7B7B] focus:outline-none focus:border-[#ff00b3] focus:ring-2 focus:ring-[#ff00b3]/20 transition-all duration-300",placeholder:"Brief description of this category...",rows:"4"}),e.jsx("p",{className:"text-xs text-[#7B7B7B] dark:text-[#A0A0A0] mt-1",children:"Optional: Describe what products belong in this category"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category Image URL"}),e.jsx("input",{type:"url",value:s.image_url,onChange:t=>c("image_url",t.target.value),className:"w-full px-4 py-3 border border-[#E9E9E9] dark:border-[#333333] rounded-xl bg-white dark:bg-[#2A2A2A] text-black dark:text-white placeholder-[#7B7B7B] focus:outline-none focus:border-[#ff00b3] focus:ring-2 focus:ring-[#ff00b3]/20 transition-all duration-300",placeholder:"https://example.com/category-image.jpg"}),e.jsx("p",{className:"text-xs text-[#7B7B7B] dark:text-[#A0A0A0] mt-1",children:"Optional: Add an image to represent this category"})]}),s.image_url&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Image Preview"}),e.jsxs("div",{className:"w-full h-48 border border-[#E9E9E9] dark:border-[#333333] rounded-xl overflow-hidden bg-[#F8F8F8] dark:bg-[#2A2A2A]",children:[e.jsx("img",{src:s.image_url,alt:"Category preview",className:"w-full h-full object-cover",onError:t=>{t.target.style.display="none",t.target.nextSibling.style.display="flex"}}),e.jsx("div",{className:"w-full h-full hidden items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(I,{className:"w-12 h-12 text-[#7B7B7B] dark:text-[#A0A0A0] mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-[#7B7B7B] dark:text-[#A0A0A0]",children:"Invalid image URL"})]})})]})]}),e.jsxs("div",{className:"flex items-center gap-4 pt-4 border-t border-[#F1F1F4] dark:border-[#333333]",children:[e.jsxs("button",{type:"submit",disabled:g||!s.name.trim(),className:"bg-[#ff00b3] hover:bg-[#FFB6C1 ] text-black font-semibold px-6 py-3 rounded-xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(b,{className:"w-4 h-4"}),g?"Updating Category...":"Update Category"]}),e.jsx("a",{href:"/admin/categories",className:"bg-gray-100 hover:bg-gray-200 dark:bg-[#2A2A2A] dark:hover:bg-[#404040] text-gray-700 dark:text-gray-300 font-medium px-6 py-3 rounded-xl transition-all duration-300",children:"Cancel"})]})]})]}),e.jsxs("div",{className:"mt-6 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-2xl p-6",children:[e.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"ðŸ’¡ Category Tips"}),e.jsxs("ul",{className:"text-sm text-blue-600 dark:text-blue-300 space-y-1",children:[e.jsx("li",{children:"â€¢ Use clear, descriptive names that customers will understand"}),e.jsx("li",{children:"â€¢ Keep descriptions concise but informative"}),e.jsx("li",{children:"â€¢ High-quality images help customers navigate your store"}),e.jsx("li",{children:"â€¢ You can always edit category details later"})]})]})]})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white dark:bg-[#121212]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-black dark:text-white mb-4",children:"Category Not Found"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:"The category you are trying to edit does not exist."}),e.jsx("a",{href:"/admin/categories",className:"bg-[#ff00b3] hover:bg-[#FFB6C1 ] text-black font-semibold px-6 py-3 rounded-xl transition-all duration-300",children:"Back to Categories"})]})})}const q=E(function(m){const o=h();return e.jsx(B,{children:e.jsx(T,{...m,id:o.id})})});export{q as default};
